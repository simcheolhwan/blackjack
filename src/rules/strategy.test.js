import s from "./strategy"

const H = ["H"]
const S = ["S"]
const DH = ["D", "H"]
const DS = ["D", "S"]
const SP = ["SP"]
const SU = ["SU"]

describe("전략", () => {
  const testStrategy = ({ hand, dealer, expected }) => {
    expect(s({ hand, dealer })).toEqual(expected)
  }

  test("undefined", () => {
    expect(s({ hand: [], dealer: [] })).toEqual([])
  })

  describe("페어", () => {
    test.each`
      hand          | dealer   | expected
      ${["A", "A"]} | ${["A"]} | ${H}
      ${["K", "K"]} | ${[4]}   | ${S}
      ${[10, 10]}   | ${[6]}   | ${S}
      ${[9, 9]}     | ${[6]}   | ${SP}
      ${[9, 9]}     | ${[7]}   | ${S}
      ${[9, 9]}     | ${[8]}   | ${SP}
      ${[9, 9]}     | ${[9]}   | ${SP}
      ${[9, 9]}     | ${[10]}  | ${S}
      ${[9, 9]}     | ${["A"]} | ${S}
      ${[8, 8]}     | ${[10]}  | ${SU}
      ${[8, 8]}     | ${["A"]} | ${H}
      ${[7, 7]}     | ${[6]}   | ${SP}
      ${[7, 7]}     | ${[7]}   | ${SP}
      ${[7, 7]}     | ${[8]}   | ${H}
      ${[7, 7]}     | ${[10]}  | ${SU}
      ${[7, 7]}     | ${["A"]} | ${H}
      ${[6, 6]}     | ${[6]}   | ${SP}
      ${[6, 6]}     | ${[7]}   | ${H}
      ${[5, 5]}     | ${[9]}   | ${DH}
      ${[4, 4]}     | ${[4]}   | ${H}
      ${[4, 4]}     | ${[5]}   | ${SP}
      ${[4, 4]}     | ${[6]}   | ${SP}
      ${[3, 3]}     | ${[7]}   | ${SP}
      ${[3, 3]}     | ${[8]}   | ${H}
      ${[2, 2]}     | ${[6]}   | ${SP}
      ${[2, 2]}     | ${[7]}   | ${SP}
      ${[2, 2]}     | ${[8]}   | ${H}
    `("$hand $dealer $expected", testStrategy)
  })

  describe("소프트 토탈", () => {
    test.each`
      hand        | dealer   | expected
      ${["A", 9]} | ${["A"]} | ${S}
      ${["A", 8]} | ${["A"]} | ${S}
      ${["A", 8]} | ${[6]}   | ${DS}
      ${["A", 7]} | ${[2]}   | ${DS}
      ${["A", 7]} | ${[3]}   | ${DS}
      ${["A", 7]} | ${[6]}   | ${DS}
      ${["A", 7]} | ${[7]}   | ${S}
      ${["A", 7]} | ${[8]}   | ${S}
      ${["A", 7]} | ${[9]}   | ${H}
      ${["A", 6]} | ${[2]}   | ${H}
      ${["A", 6]} | ${[3]}   | ${DH}
      ${["A", 6]} | ${[6]}   | ${DH}
      ${["A", 6]} | ${[7]}   | ${H}
      ${["A", 5]} | ${[3]}   | ${H}
      ${["A", 5]} | ${[4]}   | ${DH}
      ${["A", 5]} | ${[6]}   | ${DH}
      ${["A", 5]} | ${[7]}   | ${H}
      ${["A", 4]} | ${[3]}   | ${H}
      ${["A", 4]} | ${[4]}   | ${DH}
      ${["A", 4]} | ${[6]}   | ${DH}
      ${["A", 4]} | ${[7]}   | ${H}
      ${["A", 3]} | ${[4]}   | ${H}
      ${["A", 3]} | ${[5]}   | ${DH}
      ${["A", 3]} | ${[6]}   | ${DH}
      ${["A", 3]} | ${[7]}   | ${H}
      ${["A", 2]} | ${[4]}   | ${H}
      ${["A", 2]} | ${[5]}   | ${DH}
      ${["A", 2]} | ${[6]}   | ${DH}
      ${["A", 2]} | ${[7]}   | ${H}
    `("$hand $dealer $expected", testStrategy)
  })

  describe("하드 토탈", () => {
    test.each`
      hand       | dealer   | expected
      ${[10, 7]} | ${["A"]} | ${S}
      ${[10, 6]} | ${["A"]} | ${H}
      ${[10, 6]} | ${[10]}  | ${SU}
      ${[10, 6]} | ${[9]}   | ${SU}
      ${[10, 6]} | ${[8]}   | ${H}
      ${[10, 6]} | ${[7]}   | ${H}
      ${[10, 6]} | ${[6]}   | ${S}
      ${[10, 5]} | ${["A"]} | ${H}
      ${[10, 5]} | ${[10]}  | ${SU}
      ${[10, 5]} | ${[9]}   | ${H}
      ${[10, 5]} | ${[7]}   | ${H}
      ${[10, 5]} | ${[6]}   | ${S}
      ${[10, 4]} | ${[10]}  | ${SU}
      ${[10, 4]} | ${[7]}   | ${H}
      ${[10, 4]} | ${[6]}   | ${S}
      ${[10, 3]} | ${[7]}   | ${H}
      ${[10, 3]} | ${[6]}   | ${S}
      ${[10, 2]} | ${[7]}   | ${H}
      ${[10, 2]} | ${[6]}   | ${S}
      ${[10, 2]} | ${[4]}   | ${S}
      ${[10, 2]} | ${[3]}   | ${H}
      ${[6, 5]}  | ${["A"]} | ${H}
      ${[6, 5]}  | ${[10]}  | ${H}
      ${[6, 4]}  | ${[10]}  | ${H}
      ${[6, 4]}  | ${[9]}   | ${DH}
      ${[6, 3]}  | ${[7]}   | ${H}
      ${[6, 3]}  | ${[6]}   | ${DH}
      ${[6, 3]}  | ${[2]}   | ${H}
      ${[6, 2]}  | ${[6]}   | ${H}
    `("$hand $dealer $expected", testStrategy)
  })
})
